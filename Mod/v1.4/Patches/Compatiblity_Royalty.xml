<?xml version="1.0" encoding="UTF-8"?>
<Patch>
  <Operation Class="PatchOperationSequence">
    <operations>
      <li Class="PatchOperationAdd" MayRequire="Ludeon.RimWorld.Royalty">
        <xpath>Defs/FactionDef[defName="Empire"]/permanentEnemyToEveryoneExcept</xpath>
        <value>
          <li>VV_ViviFederation</li>
          <li>VV_PlayerVivi</li>
          <li>VV_PlayerExiledVivi</li>
        </value>
      </li>
      
        <!-- Guests -->
      <li Class="PatchOperationAdd" MayRequire="Ludeon.RimWorld.Royalty">
        <xpath>Defs/QuestScriptDef/root[@Class="QuestNode_Sequence"]/nodes/li[@Class="QuestNode_IsSet"]/node[@Class="QuestNode_GetRandomPawnKindForFaction"]/choices</xpath>
        <value>
          <li>
            <factionDef>VV_ViviFederation</factionDef>
            <pawnKinds>
              <li>VV_RoyalVivi</li>
              <li>VV_ViviTribesman</li>
            </pawnKinds>
          </li>  
        </value>
      </li>

      <!-- Mercenaries -->
      <li Class="PatchOperationAdd" MayRequire="Ludeon.RimWorld.Royalty">
        <xpath>/Defs/QuestScriptDef/root[@Class="QuestNode_Sequence"]/nodes/li[@Class="QuestNode_GetRandomPawnKindForFaction"]/choices</xpath>
        <value>
          <li>
            <factionDef>VV_ViviFederation</factionDef>
            <pawnKinds>
              <li>VV_ViviTribesman</li>
              <li>VV_ViviGuard</li>
              <li>VV_ViviArcher</li>
            </pawnKinds>
          </li>  
        </value>
      </li>
    </operations>
  </Operation>

</Patch>